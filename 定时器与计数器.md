# 定时器

51单片机有两个定时器

## 定时器的时间寄存器

（称呼存疑）

### 工作模式

#### 模式一(0x01)

TH与TL，TH存放高8位，TL存放低8位；
二者加起来最大存储：65535（十进制），寄存器装满时溢出，每次溢出后需要手动重装TH与TL的值

#### 模式二（0x20）

TH1存放4位，溢出后自动将TL1的值填入TH1

![image-20200118164234736](D:%5C%E5%B0%8F%E5%87%AF%E6%96%87%5CDocuments%5C%E5%AE%9A%E6%97%B6%E5%99%A8%E4%B8%8E%E8%AE%A1%E6%95%B0%E5%99%A8.assets%5Cimage-20200118164234736.png)

时钟周期等于晶振频率的倒数，机器周期等于12倍时钟周期
即存满定时器需要71ms（65536个机器周期）（此处数值为晶振频率11.0592的情况下）

## 定时器的控制寄存器与工作模式寄存器

![image-20200118193722089](D:%5C%E5%B0%8F%E5%87%AF%E6%96%87%5CDocuments%5C%E5%AE%9A%E6%97%B6%E5%99%A8%E4%B8%8E%E8%AE%A1%E6%95%B0%E5%99%A8.assets%5Cimage-20200118193722089.png)

![image-20200118193753167](D:%5C%E5%B0%8F%E5%87%AF%E6%96%87%5CDocuments%5C%E5%AE%9A%E6%97%B6%E5%99%A8%E4%B8%8E%E8%AE%A1%E6%95%B0%E5%99%A8.assets%5Cimage-20200118193753167.png)



## 使用定时器的步骤

**寄存器地址不能被8整除的时候就不能使用位操作来控制，必须使用字符操作**（即必须使用十六进制）

![image-20200118165800855](D:%5C%E5%B0%8F%E5%87%AF%E6%96%87%5CDocuments%5C%E5%AE%9A%E6%97%B6%E5%99%A8%E4%B8%8E%E8%AE%A1%E6%95%B0%E5%99%A8.assets%5Cimage-20200118165800855.png)

